{"ast":null,"code":"var _jsxFileName = \"/Users/jasonbryant/Desktop/nrel/components/chart.js\";\nvar __jsx = React.createElement;\nimport * as d3 from 'd3';\nimport React, { Fragment, useEffect, useState, createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { scaleLinear } from 'd3';\nlet accessToRef = null;\nconst months = ['jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec'];\nexport default function Chart(props) {\n  let chartRef = /*#__PURE__*/createRef();\n  const {\n    0: loadedChart,\n    1: updateLoadStatus\n  } = useState(false),\n        h_max = Math.max(props.y),\n        data_length = props.y.length,\n        h = 200,\n        w = 400;\n\n  const drawChart = () => {\n    console.log('data_length', data_length);\n    if (accessToRef != null) accessToRef.selectAll(\"*\").remove();\n\n    if (!loadedChart) {\n      // const xScale = d3.scaleLinear()\n      //     .domain([0, data_length - 1])\n      //     .range([0,w])\n      // const xAxis = d3.axisBottom(xScale)\n      // const yScale = d3.scaleLinear()\n      //     .domain([0, h_max])\n      //     .range([h, 0])\n      // con\n      accessToRef = d3.select(chartRef.current).append('svg').attr('width', w) // w\n      .attr('height', h) // h\n      .style('background-color', '#ffffff').style('padding', 10).style('margin-left', 30).style('overflow', 'visible');\n      updateLoadStatus(true);\n    }\n\n    if (true) {\n      console.log('setting data', props.y);\n      accessToRef.selectAll('rect').data(props.y).enter().append('rect').attr('x', (d, i) => i * (w / data_length)) //\n      .attr('y', (d, i) => h - 10 * d).attr('width', w / data_length) // 65\n      .attr('height', (d, i) => d * 10).attr('fill', 'tomato');\n      accessToRef.append(\"text\").attr(\"x\", w / 2).attr(\"y\", h + 30).style('text-anchor', 'middle').text('months');\n      accessToRef.append(\"text\").attr(\"transform\", \"rotate(-90)\").attr(\"y\", -30).attr(\"x\", 0 - h / 2).attr(\"dy\", \"1em\").style(\"text-anchor\", \"middle\").text(\"DNI\"); // X Axis\n\n      const xScale = d3.scaleTime().domain([1, 13]).range([0, w]),\n            xAxis = d3.axisBottom(xScale).ticks(13).tickFormat(d3.format(\"d\"));\n      accessToRef.append('g').attr('transform', `translate(0, ${h})`).call(xAxis); // Y Axis\n\n      var y0 = d3.scale.linear().range([h, 0]);\n      var yAxisLeft = d3.svg.axis().scale(y0).orient(\"left\").ticks(10, \"%\"); //.tickValues(d3.range(0, 100, 10));\n\n      accessToRef.append(\"g\").attr(\"class\", \"y axis\").style(\"fill\", \"steelblue\").call(yAxisLeft).append('text');\n    }\n  };\n\n  useEffect(() => {\n    setTimeout(() => {\n      drawChart();\n    }, 10);\n  }, [props.coordsStr, loadedChart]);\n  return __jsx(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, \"Average DNI (monthly)\"), __jsx(\"div\", {\n    id: \"chart\",\n    ref: chartRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }));\n}\nChart.propTypes = {\n  x: PropTypes.array,\n  y: PropTypes.array,\n  coordsStr: PropTypes.string\n};\nChart.defaultProps = {\n  x: [],\n  y: [],\n  coordsStr: ''\n};","map":{"version":3,"sources":["/Users/jasonbryant/Desktop/nrel/components/chart.js"],"names":["d3","React","Fragment","useEffect","useState","createRef","PropTypes","scaleLinear","accessToRef","months","Chart","props","chartRef","loadedChart","updateLoadStatus","h_max","Math","max","y","data_length","length","h","w","drawChart","console","log","selectAll","remove","select","current","append","attr","style","data","enter","d","i","text","xScale","scaleTime","domain","range","xAxis","axisBottom","ticks","tickFormat","format","call","y0","scale","linear","yAxisLeft","svg","axis","orient","setTimeout","coordsStr","propTypes","x","array","string","defaultProps"],"mappings":"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","sourcesContent":["import * as d3 from 'd3';\nimport React, { Fragment, useEffect, useState, createRef } from 'react';\nimport PropTypes from 'prop-types'\nimport { scaleLinear } from 'd3';\n\nlet accessToRef = null\n\nconst months = ['jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec']\n\nexport default function Chart(props) {\n    let chartRef = createRef()\n\n    const [loadedChart, updateLoadStatus] = useState(false),\n        h_max = Math.max(props.y),\n        data_length = props.y.length,\n        h = 200,\n        w = 400\n\n    const drawChart = () => {\n\n        console.log('data_length', data_length)\n        if(accessToRef != null)\n            accessToRef.selectAll(\"*\").remove()\n\n        if(!loadedChart) {\n            // const xScale = d3.scaleLinear()\n            //     .domain([0, data_length - 1])\n            //     .range([0,w])\n            // const xAxis = d3.axisBottom(xScale)\n\n            // const yScale = d3.scaleLinear()\n            //     .domain([0, h_max])\n            //     .range([h, 0])\n            // con\n\n            accessToRef = d3.select(chartRef.current)\n                .append('svg')\n                .attr('width', w) // w\n                .attr('height', h) // h\n                .style('background-color', '#ffffff')\n                .style('padding', 10)\n                .style('margin-left', 30)\n                .style('overflow', 'visible')\n\n                updateLoadStatus(true)\n        }\n\n        if(true) {\n            console.log('setting data', props.y)\n            accessToRef.selectAll('rect')\n                .data(props.y)\n                .enter()\n                .append('rect')\n                .attr('x', (d, i) => i * (w/data_length)) //\n                .attr('y', (d, i) => h - 10 * d)\n                .attr('width', (w/data_length)) // 65\n                .attr('height', (d, i) => d * 10)\n                .attr('fill', 'tomato')\n\n            accessToRef\n                .append(\"text\")\n                .attr(\"x\", w / 2 )\n                .attr(\"y\",  h + 30)\n                .style('text-anchor', 'middle')\n                .text('months');\n            accessToRef\n                .append(\"text\")\n                .attr(\"transform\", \"rotate(-90)\")\n                .attr(\"y\", -30)\n                .attr(\"x\",0 - (h / 2))\n                .attr(\"dy\", \"1em\")\n                .style(\"text-anchor\", \"middle\")\n                .text(\"DNI\"); \n\n            // X Axis\n            const xScale = d3.scaleTime()\n                .domain([1, 13])\n                .range([0, w]),\n            xAxis = d3.axisBottom(xScale)\n                .ticks(13)\n                .tickFormat(d3.format(\"d\"))\n            accessToRef.append('g')\n                .attr('transform', `translate(0, ${h})`) \n                .call(xAxis)\n\n            // Y Axis\n            var y0 = d3.scale.linear().range([h, 0])\n            var yAxisLeft = d3.svg.axis()\n                .scale(y0)\n                .orient(\"left\")\n                .ticks(10, \"%\")\n                //.tickValues(d3.range(0, 100, 10));\n            accessToRef\n                .append(\"g\")\n                .attr(\"class\", \"y axis\")\n                .style(\"fill\", \"steelblue\")\n                .call(yAxisLeft)\n                .append('text')\n        }\n    }\n\n    useEffect(() => {\n        setTimeout(()=> {\n            drawChart()\n        }, 10)\n    }, [props.coordsStr, loadedChart]);\n\n\n    return (\n        <Fragment>\n            <h2>Average DNI (monthly)</h2>\n            <div id=\"chart\" ref={chartRef}></div>\n        </Fragment>\n    );\n}\n\nChart.propTypes = {\n    x: PropTypes.array,\n    y: PropTypes.array,\n    coordsStr: PropTypes.string\n}\n  \nChart.defaultProps = {\n    x: [],\n    y: [],\n    coordsStr: ''\n}"]},"metadata":{},"sourceType":"module"}